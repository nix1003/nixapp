<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inventory | NixApp</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .inventory-wrapper {
      background: #fff;
      border-radius: 8px;
      padding: 2rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 800px;
      margin: 2rem auto;
    }

    #searchInput {
      width: 100%;
      padding: 0.75rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-bottom: 1rem;
    }

    .edit-field {
      width: 100%;
      padding: 0.25rem;
      font-size: 0.9rem;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .save-btn {
      background-color: #444;
      color: white;
      padding: 0.3rem 0.7rem;
      border: none;
      border-radius: 6px;
      font-size: 0.8rem;
      cursor: pointer;
    }

    .save-btn:hover {
      background-color: #666;
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <div class="content">
    <header>
      <a href="index.html" class="home-button" aria-label="Home">
        <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="20" height="20">
          <path d="M3 9.75L12 3l9 6.75V21a1 1 0 0 1-1 1h-6v-6h-4v6H4a1 1 0 0 1-1-1V9.75z"/>
        </svg>
      </a>
      <h1>NixApp</h1>
      <button id="loginBtn">Admin</button>
    </header>

    <main class="container">
      <div class="inventory-wrapper">
        <h2 style="text-align:center; color:#444; margin-bottom:1.5rem;">Inventory System</h2>

        <input type="text" id="searchInput" placeholder="Search by item name..." />

        <table id="inventoryTable">
          <thead>
            <tr>
              <th>Item Name</th>
              <th>Quantity</th>
              <th>Price ($)</th>
              <th>Product Page</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <!-- JS-generated rows go here -->
          </tbody>
        </table>
      </div>
    </main>

    <footer>
      &copy; 2025 NixApp
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    particlesJS.load('particles-js', 'particles.json', function () {
      console.log('Particles loaded');
    });

    const items = [
      { name: "USB-C Cable", quantity: 25, price: 9.99 },
      { name: "Wireless Mouse", quantity: 10, price: 19.99 },
      { name: "Keyboard", quantity: 5, price: 34.99 },
      { name: "Webcam", quantity: 8, price: 49.99 },
      { name: "Monitor Stand", quantity: 3, price: 29.99 },
      { name: "Laptop", quantity: 2, price: 899.00 },
      { name: "External Hard Drive", quantity: 12, price: 74.50 }
    ];

    let isAdmin = false;

    const tableBody = document.getElementById("tableBody");
    const searchInput = document.getElementById("searchInput");
    const loginBtn = document.getElementById("loginBtn");

    function renderTable(data) {
      tableBody.innerHTML = "";
      data.forEach((item, index) => {
        const row = document.createElement("tr");

        if (isAdmin) {
          row.innerHTML = `
            <td><input class="edit-field" value="${item.name}" data-index="${index}" data-field="name" /></td>
            <td><input class="edit-field" value="${item.quantity}" data-index="${index}" data-field="quantity" type="number" /></td>
            <td><input class="edit-field" value="${item.price.toFixed(2)}" data-index="${index}" data-field="price" type="number" step="0.01" /></td>
            <td><button class="save-btn" onclick="saveRow(${index})">Save</button></td>
          `;
        } else {
          row.innerHTML = `
            <td>${item.name}</td>
            <td>${item.quantity}</td>
            <td>${item.price.toFixed(2)}</td>
            <td><a href="product.html?id=${index}" class="view-button">View</a></td>
          `;
        }

        tableBody.appendChild(row);
      });
    }

    function saveRow(index) {
      const inputs = document.querySelectorAll(`input[data-index="${index}"]`);
      inputs.forEach(input => {
        const field = input.getAttribute("data-field");
        const value = input.value;
        items[index][field] = field === "quantity" || field === "price"
          ? parseFloat(value)
          : value;
      });
      renderTable(items);
    }

    loginBtn.addEventListener("click", () => {
      const password = prompt("Enter admin password:");
      if (password === "123") {
        isAdmin = true;
        alert("Admin mode enabled.");
        renderTable(items);
      } else {
        alert("Incorrect password.");
      }
    });

    searchInput.addEventListener("input", () => {
      const searchTerm = searchInput.value.toLowerCase();
      const filtered = items.filter(item =>
        item.name.toLowerCase().includes(searchTerm)
      );
      renderTable(filtered);
    });

    renderTable(items);
  </script>
</body>
</html>
